plugins {
    id 'application'
}

repositories {
    mavenCentral()
}

def javafxVersion = "21"
def javafxPlatform = "mac-aarch64"

dependencies {
    // JavaFX modules
    implementation "org.openjfx:javafx-base:${javafxVersion}:${javafxPlatform}"
    implementation "org.openjfx:javafx-controls:${javafxVersion}:${javafxPlatform}"
    implementation "org.openjfx:javafx-graphics:${javafxVersion}:${javafxPlatform}"
    implementation "org.openjfx:javafx-fxml:${javafxVersion}:${javafxPlatform}"

    // Your libraries
    testImplementation libs.junit
    implementation libs.guava
    implementation 'org.reflections:reflections:0.10.2'
}

// Java toolchain
java {
    toolchain {
        languageVersion = JavaLanguageVersion.of(18)
    }
}

// Default CLI main class
application {
    mainClass = 'org.example.App'
}

// Custom GUI task
tasks.register('runGui', JavaExec) {
    group = 'application'
    description = 'Run the JavaFX Problem Browser GUI.'
    classpath = sourceSets.main.runtimeClasspath
    mainClass.set('org.example.leetcode.gui.ProblemBrowser')

    doFirst {
        jvmArgs = [
            '--module-path', configurations.runtimeClasspath.asPath,
            '--add-modules', 'javafx.controls,javafx.fxml,javafx.graphics,javafx.base'
        ]
    }
}
